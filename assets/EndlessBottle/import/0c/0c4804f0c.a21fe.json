[1,["ecpdLyjvZBwrvm+cedCcQy","7a/QZLET9IDreTiBfRn2PD","a2MjXRFdtLlYQ5ouAFv/+R","dbAkwwvE5PZa6KSK1jQ5ib","5fSTIrsAFLgrMEp3M7T1a+","7e6mvVSQNH2LG5KN6IppDD","2ePEfdxVZN15aTsZV2OJUY","43IuY+SZJJErbtKKRS1q8a","0fbeTmO6lJu4QPe9i0SHUY","4bt5lX//NAeb3U2faCPkgC","dcJHbUTXdHzYVmm0pdWSXf","30tlxSqtxPcruwwfJnhddk","37SJ4wqcRNcZj/IOIyMolq","02delMVqdBD70a/HSD99FK","9asHZK9bBGfZ5FsTOp1ztr","252oo1olVOVIbBs0DSEcuG","25Lwc9CAZJSLcS3tlf+YR+","02PV5I7s9HbYDVUodtAV+2","5d1nvOKZtFopa8BQMkOdIa","50iSOPVGNOX7mIjJ28bUdF","727wF9pA9Fnq8r205opJDc","3bPFhlnyRD1K+aGYZ15RY4","ae536FFWZEp5AF5pAa5SCr","a4ecXpg1FLX6Er8oXbjZFr"],["node","_spriteFrame","_textureSetter","_N$skeletonData","root","target","pourInRipple","pourIn","bottleSke","cover","shadow","cupImg_bottom","hiddenMark","capNode","surfaceHighlight","surface","water","data","effect"],["cc.SpriteFrame",["cc.Node",["_name","_opacity","_active","_prefab","_components","_contentSize","_parent","_trs","_children","_color"],0,4,9,5,1,7,2,5],["cc.Node",["_name","_active","_parent","_components","_prefab","_contentSize","_trs","_children"],1,1,2,4,5,7,2],["cc.Sprite",["_enabled","_sizeMode","node","_materials","_spriteFrame"],1,1,3,6],["sp.Skeleton",["defaultSkin","_preCacheMode","premultipliedAlpha","_animationName","_cacheMode","loop","timeScale","_playTimes","defaultAnimation","node","_materials"],-6,1,3],["cc.PrefabInfo",["fileId","root"],2,1],["cc.EffectAsset",["_name","shaders","techniques"],0],["cc.Prefab",["_name"],2],["cc.Node",["_name","_active","_parent","_children","_components","_prefab","_contentSize"],1,1,2,12,4,5],["cc.Button",["node","clickEvents"],3,1,9],["cc.ClickEvent",["_componentId","handler","target"],1,1],["37e44pBeOxNTZx0Hq3vgN3A",["currentState","node","water","surface","surfaceHighlight","capNode","hiddenMark","cupImg_bottom","shadow","cover","bottleSke","pourIn","pourInRipple"],2,1,1,1,1,1,1,1,1,1,1,1,1],["7a449MBNidC5YFAlSFAt/4u",["node"],3,1]],[[5,0,1,2],[3,2,3,4,1],[1,0,2,6,4,3,5,7,3],[3,1,2,3,4,2],[1,0,6,4,3,5,7,2],[1,0,1,6,4,3,9,5,7,3],[1,0,6,8,3,2],[2,0,2,7,3,4,5,6,2],[4,0,8,1,4,2,6,3,9,10,8],[6,0,1,2,4],[7,0,2],[1,0,8,4,3,5,2],[1,0,1,6,4,3,5,7,3],[1,0,6,4,3,5,2],[8,0,1,2,3,4,5,6,3],[2,0,2,3,4,5,2],[2,0,2,3,4,5,6,2],[2,0,1,2,3,4,5,6,3],[3,0,2,3,2],[3,2,4,1],[9,0,1,1],[10,0,1,2,3],[11,0,1,2,3,4,5,6,7,8,9,10,11,12,2],[5,1,1],[4,0,8,1,4,5,2,6,3,7,9,10,10],[4,0,1,4,5,2,6,3,7,9,10,9],[4,0,1,5,2,3,7,9,10,7],[12,0,1]],[[[{"name":"bottle_up","rect":[3,9,122,415],"offset":[1.5,-3.5],"originalSize":[125,426],"capInsets":[0,0,0,0]}],[0],0,[0],[2],[6]],[[{"name":"pingsai","rect":[0,0,60,58],"offset":[0,0],"originalSize":[60,58],"capInsets":[0,0,0,0]}],[0],0,[0],[2],[7]],[[{"name":"shadow","rect":[0,0,131,53],"offset":[0,0],"originalSize":[131,53],"capInsets":[0,0,0,0]}],[0],0,[0],[2],[8]],[[[9,"water-wave",[{"hash":4290541501,"record":null,"name":"water-wave|vs|fs","glsl3":{"vert":"\nprecision highp float;\nuniform CCGlobal {\n  mat4 cc_matView;\n  mat4 cc_matViewInv;\n  mat4 cc_matProj;\n  mat4 cc_matProjInv;\n  mat4 cc_matViewProj;\n  mat4 cc_matViewProjInv;\n  vec4 cc_cameraPos;\n  vec4 cc_time;\n  mediump vec4 cc_screenSize;\n  mediump vec4 cc_screenScale;\n};\nuniform CCLocal {\n  mat4 cc_matWorld;\n  mat4 cc_matWorldIT;\n};\nin vec3 a_position;\nin vec4 a_color;\nout vec4 v_color;\n#if USE_TEXTURE\nin vec2 a_uv0;\nout vec2 v_uv0;\n#endif\nvoid main () {\n  vec4 pos = vec4(a_position, 1);\n  #if CC_USE_MODEL\n  pos = cc_matViewProj * cc_matWorld * pos;\n  #else\n  pos = cc_matViewProj * pos;\n  #endif\n  #if USE_TEXTURE\n  v_uv0 = a_uv0;\n  #endif\n  v_color = a_color;\n  gl_Position = pos;\n}","frag":"\nprecision highp float;\n#if USE_ALPHA_TEST\n#if USE_ALPHA_TEST\n  uniform ALPHA_TEST {\n    float alphaThreshold;\n  };\n#endif\n#endif\nuniform CCGlobal {\n  mat4 cc_matView;\n  mat4 cc_matViewInv;\n  mat4 cc_matProj;\n  mat4 cc_matProjInv;\n  mat4 cc_matViewProj;\n  mat4 cc_matViewProjInv;\n  vec4 cc_cameraPos;\n  vec4 cc_time;\n  mediump vec4 cc_screenSize;\n  mediump vec4 cc_screenScale;\n};\nin vec4 v_color;\n#if USE_TEXTURE\nin vec2 v_uv0;\nuniform sampler2D texture;\n#endif\nuniform Properties {\n  vec4 colors[4];\n  vec4 surfaceColors[4];\n  vec4 heights[4];\n  vec2 iResolution;\n  float skewAngle;\n  float waveType;\n};\nvec2 tranPt(vec2 uv,float angle,vec2 center){\n  float c = cos(angle);\n  float s = sin(angle);\n  float Ox = center.x;\n  float Oy = center.y;\n  mat3 m = mat3(\n        c,0.0-s,(1.0-c)*Ox+s*Oy,\n        s,c,(1.0-c)*Oy-s*Ox,\n        0.0,0.0,1.0\n  );\n  vec3 ret = m*vec3(uv.x,uv.y,0.0);\n  return ret.xy;\n}\nfloat drawWater(vec2 uv,float angle,float _height,int arrSize,int curIdx)\n{\n    float ratio = iResolution.y/iResolution.x;\n    angle = mod(angle, 2.0*3.1415);\n    bool inverted = angle > 0.5*3.1415 && angle < 1.5*3.1415;\n    vec2 center = inverted ? vec2(0.5, _height) : vec2(0.5, 1.0 - _height);\n    float effectiveAngle = inverted ? angle + 3.1415 : angle;\n    effectiveAngle = mod(effectiveAngle, 2.0*3.1415);\n    float cosAngle = abs(cos(effectiveAngle));\n    float sinAngle = abs(sin(effectiveAngle));\n    float ellipseRadiusX = cosAngle < 0.01 ? 10.0 : 0.5 / cosAngle;\n    float ellipseRadiusY = 0.15 * cosAngle;\n    vec2 adjustedUV = uv;\n    adjustedUV.y *= ratio;\n    adjustedUV -= vec2(center.x, center.y * ratio);\n    vec2 uv1 = tranPt(adjustedUV, effectiveAngle, vec2(0.0));\n    float normX = uv1.x / ellipseRadiusX;\n    float normY = uv1.y / ellipseRadiusY;\n    float distToCenter = normX * normX + normY * normY;\n    bool inEllipse = (distToCenter <= 1.0);\n    bool isTopLayer = (curIdx == arrSize - 1);\n    float waterLineY = 0.0;\n    float alpha = 0.0;\n    if (!inverted && uv1.y > waterLineY && !inEllipse) alpha = 1.0;\n    if (inverted && uv1.y < waterLineY && !inEllipse) alpha = 1.0;\n    if (isTopLayer) {\n        if ((!inverted && (uv1.y > waterLineY || distToCenter <= (1.0 ))) ||\n            (inverted && (uv1.y < waterLineY || distToCenter <= (1.0 )))) {\n            alpha = 1.0;\n            if(distToCenter <= (1.0)) {\n                alpha = 0.9;\n            }\n        } else {\n            alpha = 0.0;\n        }\n    }\n    return alpha;\n}\nvoid main () {\n  vec4 ret = vec4(1.0,1.0,1.0,1.0);\n  ret *= texture(texture, v_uv0);\n  if(ret.a == 0.0){\n    discard;\n  }\n  float angle = mod(skewAngle,360.0) * 3.1415 / 180.0;\n  vec2 uv = vec2(v_uv0);\n  float a = 0.0;\n  float _height = 0.0;\n  int size = 0;\n  for(int i=0;i<4;i++){\n    if(heights[i].x<0.001){\n      continue;\n    }\n    size++;\n  }\n  for(int i=0;i<4;i++){\n    if(heights[i].x<0.001){\n      continue;\n    }\n    _height+=heights[i].x;\n    a += drawWater(uv,angle,_height,size,i);\n    if(a>0.0){\n      if(a == 0.9) {\n          ret *= surfaceColors[i];\n      } else {\n          vec4 color = colors[i];\n          for(int idx = 0; idx < 4; idx++){\n            if(i==idx){\n              color = colors[idx];\n            }\n          }\n          ret *= a * color;\n      }\n      break;\n    }\n  }\n  if(a<0.001){\n    discard;\n  }\n  gl_FragColor = ret;\n}"},"glsl1":{"vert":"\nprecision highp float;\nuniform mat4 cc_matViewProj;\nuniform mat4 cc_matWorld;\nattribute vec3 a_position;\nattribute vec4 a_color;\nvarying vec4 v_color;\n#if USE_TEXTURE\nattribute vec2 a_uv0;\nvarying vec2 v_uv0;\n#endif\nvoid main () {\n  vec4 pos = vec4(a_position, 1);\n  #if CC_USE_MODEL\n  pos = cc_matViewProj * cc_matWorld * pos;\n  #else\n  pos = cc_matViewProj * pos;\n  #endif\n  #if USE_TEXTURE\n  v_uv0 = a_uv0;\n  #endif\n  v_color = a_color;\n  gl_Position = pos;\n}","frag":"\nprecision highp float;\n#if USE_ALPHA_TEST\n#if USE_ALPHA_TEST\n#endif\n#endif\nvarying vec4 v_color;\n#if USE_TEXTURE\nvarying vec2 v_uv0;\nuniform sampler2D texture;\n#endif\nuniform vec4 colors[4];\nuniform vec4 surfaceColors[4];\nuniform vec4 heights[4];\nuniform vec2 iResolution;\nuniform float skewAngle;\nvec2 tranPt(vec2 uv,float angle,vec2 center){\n  float c = cos(angle);\n  float s = sin(angle);\n  float Ox = center.x;\n  float Oy = center.y;\n  mat3 m = mat3(\n        c,0.0-s,(1.0-c)*Ox+s*Oy,\n        s,c,(1.0-c)*Oy-s*Ox,\n        0.0,0.0,1.0\n  );\n  vec3 ret = m*vec3(uv.x,uv.y,0.0);\n  return ret.xy;\n}\nfloat drawWater(vec2 uv,float angle,float _height,int arrSize,int curIdx)\n{\n    float ratio = iResolution.y/iResolution.x;\n    angle = mod(angle, 2.0*3.1415);\n    bool inverted = angle > 0.5*3.1415 && angle < 1.5*3.1415;\n    vec2 center = inverted ? vec2(0.5, _height) : vec2(0.5, 1.0 - _height);\n    float effectiveAngle = inverted ? angle + 3.1415 : angle;\n    effectiveAngle = mod(effectiveAngle, 2.0*3.1415);\n    float cosAngle = abs(cos(effectiveAngle));\n    float sinAngle = abs(sin(effectiveAngle));\n    float ellipseRadiusX = cosAngle < 0.01 ? 10.0 : 0.5 / cosAngle;\n    float ellipseRadiusY = 0.15 * cosAngle;\n    vec2 adjustedUV = uv;\n    adjustedUV.y *= ratio;\n    adjustedUV -= vec2(center.x, center.y * ratio);\n    vec2 uv1 = tranPt(adjustedUV, effectiveAngle, vec2(0.0));\n    float normX = uv1.x / ellipseRadiusX;\n    float normY = uv1.y / ellipseRadiusY;\n    float distToCenter = normX * normX + normY * normY;\n    bool inEllipse = (distToCenter <= 1.0);\n    bool isTopLayer = (curIdx == arrSize - 1);\n    float waterLineY = 0.0;\n    float alpha = 0.0;\n    if (!inverted && uv1.y > waterLineY && !inEllipse) alpha = 1.0;\n    if (inverted && uv1.y < waterLineY && !inEllipse) alpha = 1.0;\n    if (isTopLayer) {\n        if ((!inverted && (uv1.y > waterLineY || distToCenter <= (1.0 ))) ||\n            (inverted && (uv1.y < waterLineY || distToCenter <= (1.0 )))) {\n            alpha = 1.0;\n            if(distToCenter <= (1.0)) {\n                alpha = 0.9;\n            }\n        } else {\n            alpha = 0.0;\n        }\n    }\n    return alpha;\n}\nvoid main () {\n  vec4 ret = vec4(1.0,1.0,1.0,1.0);\n  ret *= texture2D(texture, v_uv0);\n  if(ret.a == 0.0){\n    discard;\n  }\n  float angle = mod(skewAngle,360.0) * 3.1415 / 180.0;\n  vec2 uv = vec2(v_uv0);\n  float a = 0.0;\n  float _height = 0.0;\n  int size = 0;\n  for(int i=0;i<4;i++){\n    if(heights[i].x<0.001){\n      continue;\n    }\n    size++;\n  }\n  for(int i=0;i<4;i++){\n    if(heights[i].x<0.001){\n      continue;\n    }\n    _height+=heights[i].x;\n    a += drawWater(uv,angle,_height,size,i);\n    if(a>0.0){\n      if(a == 0.9) {\n          ret *= surfaceColors[i];\n      } else {\n          vec4 color = colors[i];\n          for(int idx = 0; idx < 4; idx++){\n            if(i==idx){\n              color = colors[idx];\n            }\n          }\n          ret *= a * color;\n      }\n      break;\n    }\n  }\n  if(a<0.001){\n    discard;\n  }\n  gl_FragColor = ret;\n}"},"builtins":{"globals":{"blocks":[{"name":"CCGlobal","defines":[]}],"samplers":[]},"locals":{"blocks":[{"name":"CCLocal","defines":[]}],"samplers":[]}},"defines":[{"name":"USE_TEXTURE","type":"boolean","defines":[]},{"name":"CC_USE_MODEL","type":"boolean","defines":[]},{"name":"USE_ALPHA_TEST","type":"boolean","defines":[]}],"blocks":[{"name":"ALPHA_TEST","binding":0,"members":[{"name":"alphaThreshold","type":13,"count":1}],"defines":["USE_ALPHA_TEST"]},{"name":"Properties","binding":1,"members":[{"name":"colors","type":16,"count":4},{"name":"surfaceColors","type":16,"count":4},{"name":"heights","type":16,"count":4},{"name":"iResolution","type":14,"count":1},{"name":"skewAngle","type":13,"count":1},{"name":"waveType","type":13,"count":1}],"defines":[]}],"samplers":[{"name":"texture","type":29,"count":1,"binding":30,"defines":["USE_TEXTURE"]}]}],[{"passes":[{"program":"water-wave|vs|fs","blendState":{"targets":[{"blend":true}]},"rasterizerState":{"cullMode":0},"properties":{"texture":{"value":"white","type":29},"alphaThreshold":{"type":13,"value":[0.5]}}}]}]]],0,0,[],[],[]],[[{"name":"shaodow_p","rect":[0,0,163,89],"offset":[0,0],"originalSize":[163,89],"capInsets":[0,0,0,0]}],[0],0,[0],[2],[9]],[[{"name":"cupMask4","rect":[0,0,108,404],"offset":[0,0],"originalSize":[108,404],"capInsets":[20,0,20,0]}],[0],0,[0],[2],[10]],[[{"name":"bottle_p","rect":[0,0,130,429],"offset":[0,0],"originalSize":[130,429],"capInsets":[0,0,0,0]}],[0],0,[0],[2],[11]],[[{"name":"bottle_down","rect":[2,1,122,424],"offset":[0.5,0],"originalSize":[125,426],"capInsets":[0,0,0,0]}],[0],0,[0],[2],[12]],[[{"name":"default_sprite_splash","rect":[0,0,2,2],"offset":[0,0],"originalSize":[2,2],"capInsets":[0,0,0,0]}],[0],0,[0],[2],[13]],[[[10,"cup"],[11,"cup",[-17,-18,-19,-20],[[18,false,-2,[34]],[20,-4,[[21,"37e44pBeOxNTZx0Hq3vgN3A","onBtn_click",-3]]],[22,7,-16,-15,-14,-13,-12,-11,-10,-9,-8,-7,-6,-5]],[23,-1],[5,108,404]],[14,"cupMask",false,1,[-23,-24,-25,-26,-27,-28,-29,-30,-31,-32],[[[19,-21,28],-22],4,1],[0,"c68211FzhI2Lmi1Nis/WGu",1],[5,108,404]],[6,"hiddenMark",2,[-33,-34,-35,-36],[0,"1eE16zFdJNA6+CmzsNApgR",1]],[6,"cover",1,[-37,-38],[0,"4cOXStEVRCuaqEqly6DVil",1]],[4,"cupImg_bottom",1,[[1,-39,[0],1]],[0,"5ft6JPTixKq6XYQBRu70dv",1],[5,125,426],[0,-5,0,0,0,0,1,1,1,1]],[2,"shadow",false,2,[[1,-40,[2],3]],[0,"eeLqWsRPxAwaWJqQNiRlu6",1],[5,131,53],[0,-215,0,0,0,0,1,1,1,1]],[2,"cap",false,2,[[1,-41,[20],21]],[0,"24po4WeGRDiJfhd0T148N1",1],[5,60,58],[0,185,0,0,0,0,1,1,1,1]],[7,"surface",2,[-43],[-42],[0,"d0QGV4IkpC9YhDvryOGJqg",1],[5,136.57,36.28],[0,0,0,0,0,0,1,0.75,0.75,1]],[7,"pourIn",2,[-45],[-44],[0,"c5km5/fE9MmpGgaPdrwlte",1],[5,93,73],[0,0,0,0,0,0,1,0.7,0.7,0.5]],[5,"Layer1",0,2,[[3,0,-46,[4],5]],[0,"f6bfxitMdGyKGBLlzqd/wm",1],[4,4278190335],[5,80,60],[0,45,0,0,0,0,1,1,1,1]],[5,"Layer2",0,2,[[3,0,-47,[6],7]],[0,"a2rcvKMzFIXKq/djUrm+2I",1],[4,4278255360],[5,80,60],[0,-5,0,0,0,0,1,1,1,1]],[5,"Layer3",0,2,[[3,0,-48,[8],9]],[0,"79ERx6lwBPrboW+NC521Dt",1],[4,4294901760],[5,80,60],[0,-55,0,0,0,0,1,1,1,1]],[12,"Layer4",0,2,[[3,0,-49,[10],11]],[0,"69GUTtD69EaoMD2zmiSlVA",1],[5,80,60],[0,-105,0,0,0,0,1,1,1,1]],[2,"mark1",false,3,[[1,-50,[12],13]],[0,"0cHKlqBZdCg4y7LQTxUNf2",1],[5,35,62],[0,30,0,0,0,0,1,0.4,0.4,1]],[2,"mark2",false,3,[[1,-51,[14],15]],[0,"abFif2KsFBxpphYWwgPLE1",1],[5,35,62],[0,-17,0,0,0,0,1,0.4,0.4,1]],[2,"mark3",false,3,[[1,-52,[16],17]],[0,"b79hGlgcJJ1ZsCjeEwfCov",1],[5,35,62],[0,-65,0,0,0,0,1,0.4,0.4,1]],[2,"mark4",false,3,[[1,-53,[18],19]],[0,"28RVFMgndEc4YIhhCyg9iG",1],[5,35,62],[0,-110,0,0,0,0,1,0.4,0.4,1]],[15,"highlight",8,[-54],[0,"d0nWlbopVItZ3Bjv6Q5yQo",1],[5,136.57,36.28]],[24,"default","ggsm",1,1,false,false,0,"ggsm",1,18,[22]],[25,"default",1,1,false,false,1.5,"sm",1,8,[23]],[16,"pourInRipple",9,[-55],[0,"2aU9vFdgFHiII7DSGkEiZy",1],[5,93,73],[0,0,0,0,0,0,1,1,1,2]],[8,"default","sh",1,1,false,2,"sh",21,[24]],[8,"default","smbw",1,1,false,2,"smbw",9,[25]],[4,"cupImg",2,[[1,-56,[26],27]],[0,"2d1SfJtOBC5KvhMDvB4y3E",1],[5,123,421],[2.223,-7.5,0,0,0,0,1,1,1,1]],[27,2],[4,"coverShadow",4,[[1,-57,[29],30]],[0,"2btppwI8lKrJTdVgZ9awYx",1],[5,163,89],[0,-200,0,0,0,0,1,1,1,1]],[13,"gypsum",4,[[1,-58,[31],32]],[0,"bfT6ssZNZJ7I1SHhPnDRuk",1],[5,130,429]],[17,"bottleSke",false,1,[-59],[0,"adLxOeYI5HN551SseSMBcF",1],[5,162.53,483.3],[4,-192,0,0,0,0,1,1,1,1]],[26,"default",0,false,false,"pzfg",1,28,[33]]],0,[0,4,1,0,0,1,0,5,1,0,0,1,0,6,22,0,7,23,0,8,29,0,9,4,0,10,6,0,11,5,0,12,3,0,13,7,0,14,19,0,15,20,0,16,25,0,0,1,0,-1,5,0,-2,2,0,-3,4,0,-4,28,0,0,2,0,-2,25,0,-1,6,0,-2,10,0,-3,11,0,-4,12,0,-5,13,0,-6,3,0,-7,7,0,-8,8,0,-9,9,0,-10,24,0,-1,14,0,-2,15,0,-3,16,0,-4,17,0,-1,26,0,-2,27,0,0,5,0,0,6,0,0,7,0,-1,20,0,-1,18,0,-1,23,0,-1,21,0,0,10,0,0,11,0,0,12,0,0,13,0,0,14,0,0,15,0,0,16,0,0,17,0,-1,19,0,-1,22,0,0,24,0,0,26,0,0,27,0,-1,29,0,17,1,59],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,19,20,22,23,25,29],[-1,1,-1,1,-1,1,-1,1,-1,1,-1,1,-1,1,-1,1,-1,1,-1,1,-1,1,-1,-1,-1,-1,-1,1,1,-1,1,-1,1,-1,-1,3,3,3,3,18,3],[0,14,0,15,0,2,0,2,0,2,0,2,0,3,0,3,0,3,0,3,0,16,1,1,1,1,0,17,18,0,19,0,20,1,0,4,4,5,5,21,22]],[[{"name":"hiddenMark","rect":[0,0,35,62],"offset":[0,0],"originalSize":[35,62],"capInsets":[0,0,0,0]}],[0],0,[0],[2],[23]]]]